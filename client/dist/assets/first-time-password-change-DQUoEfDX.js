import{b as j,Z as f,r as l,j as e,a as t,y as o,bu as N}from"./index-Bwc4gm7I.js";import{L as P}from"./Loader-XrBgEA7L.js";function H(){const i=j();f();const{state:u}=f(),h=u==null?void 0:u.email,[m,p]=l.useState(""),[n,x]=l.useState(""),[d,y]=l.useState(""),[c,b]=l.useState(!1),[k,g]=l.useState(!1);l.useEffect(()=>{h||i("/auth/sign-in")},[h,i]);const w=a=>{var r;const s=((r=a==null?void 0:a.data)==null?void 0:r.message)||(a==null?void 0:a.message)||"Có lỗi xảy ra!";o.error(s,{autoClose:2e3,closeOnClick:!0,pauseOnHover:!1})},v=()=>{if(!m||!n||!d){o.error("Vui lòng nhập đầy đủ thông tin",{autoClose:2e3,closeOnClick:!0,pauseOnHover:!1});return}if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).{8,}$/.test(n)){o.error("Mật khẩu phải chứa ít nhất 1 kí tự viết hoa, 1 kí tự viết thường, 1 số, 1 kí tự đặc biệt và tối thiểu 8 kí tự",{autoClose:2e3,closeOnClick:!0,pauseOnHover:!1});return}if(m===n){o.error("Mật khẩu mới phải khác mật khẩu cũ",{autoClose:2e3,closeOnClick:!0,pauseOnHover:!1});return}if(n!==d){o.error("Mật khẩu xác nhận không trùng khớp",{autoClose:2e3,closeOnClick:!0,pauseOnHover:!1});return}C()},C=async()=>{var a;g(!0);try{const s=await N(h,m,n,d),r=(a=s==null?void 0:s.response)==null?void 0:a.data;if((r==null?void 0:r.success)===!1||(s==null?void 0:s.success)===!1){w(r||s);return}if(s!=null&&s.success)return o.success(s.message,{autoClose:3e3,closeOnClick:!0,pauseOnHover:!1}),i("/auth/sign-in")}catch(s){console.error(s,"Error"),o.error("Thay đổi mật khẩu không thành công!",{autoClose:2e3,closeOnClick:!0,pauseOnHover:!1})}finally{g(!1)}};return e.jsx(e.Fragment,{children:k?e.jsx(P,{}):e.jsxs("section",{className:"m-8 flex",children:[e.jsx("div",{className:"w-2/5 h-full hidden lg:block",children:e.jsx("img",{src:"/img/pattern.png",className:"h-full w-full object-cover rounded-3xl"})}),e.jsxs("div",{className:"w-full lg:w-3/5 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(t.Typography,{variant:"h2",className:"font-bold mb-4",children:"Thay đổi mật khẩu lần đầu"}),e.jsx(t.Typography,{variant:"paragraph",color:"blue-gray",className:"text-lg font-normal",children:"Nhập mật khẩu của bạn và mật khẩu mới để thay đổi."})]}),e.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",children:[e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(t.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Mật khẩu cũ"}),e.jsx(t.Input,{type:c?"text":"password",size:"lg",placeholder:"********",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:a=>p(a.target.value)}),e.jsx(t.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Mật khẩu mới"}),e.jsx(t.Input,{type:c?"text":"password",size:"lg",placeholder:"********",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:a=>x(a.target.value)}),e.jsx(t.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Xác nhận mật khẩu mới"}),e.jsx(t.Input,{type:c?"text":"password",size:"lg",placeholder:"********",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:a=>y(a.target.value)})]}),e.jsx(t.Checkbox,{label:e.jsx(t.Typography,{variant:"small",color:"gray",className:"flex items-center justify-start font-medium",children:"Hiển thị mật khẩu"}),containerProps:{className:"-ml-2.5"},checked:c,onChange:()=>b(!c)}),e.jsx(t.Button,{className:"mt-6",fullWidth:!0,onClick:v,children:"Thay đổi mật khẩu"})]})]})]})})}export{H as FirstTimeChangePassword,H as default};
