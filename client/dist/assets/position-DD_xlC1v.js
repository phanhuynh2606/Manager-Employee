import{r as o,j as e}from"./index-CVZjuLi7.js";import{g as S,c as E,u as M,a as P,d as R}from"./position-BiXkzOBZ.js";import{F as l,I as i}from"./index-CHBvb3cU.js";import{S as p,B as h,M as x}from"./index-BjrRxxmI.js";import{R as B}from"./index-D3eVkrds.js";import{F as N}from"./Table-CdKyJk3D.js";import{R as V}from"./EditOutlined-B5RsWB_x.js";import{R as H}from"./DeleteOutlined-Bl3nP3f5.js";import"./iconUtil-BCGkcafc.js";import"./Pagination-BWUH9pYp.js";function K(){const[f,j]=o.useState([]),[c,y]=o.useState(""),[k,d]=o.useState(!1),[m,u]=o.useState(!1),[n,F]=o.useState(null),[a]=l.useForm();o.useEffect(()=>{r()},[c]);const r=async()=>{try{const s=await S({name:c});s.success&&j(s.data)}catch(s){console.error("Failed to fetch positions:",s)}},v=async()=>{try{const s=a.getFieldsValue(),t=await E(s);return d(!1),a.resetFields(),r(),t}catch(s){console.error("Failed to add position:",s)}},b=()=>{a.resetFields(),d(!1)};o.useEffect(()=>{n&&m&&a.setFieldsValue({name:n==null?void 0:n.name,description:n==null?void 0:n.description})},[n,m,a]);const T=async s=>{try{const t=await P(s);t&&(F(t.data),a.setFieldsValue(t),u(!0))}catch(t){console.error("Failed to show modal edit:",t)}},C=()=>{a.resetFields(),u(!1)},g=async()=>{try{const s=a.getFieldsValue(),t=await M(n._id,s);return u(!1),a.resetFields(),r(),t}catch(s){console.error("Failed to edit position:",s)}},w=async s=>{try{const t=await R(s);return r(),t}catch(t){console.error("Failed to delete position:",t)}},I=[{title:"Tên vị trí",dataIndex:"name",key:"name",width:"25%",render:s=>e.jsx("p",{className:"text-base font-medium",children:s})},{title:"Mô tả",dataIndex:"description",key:"description",width:"50%"},{title:"Hành động",key:"action",render:(s,t)=>e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(h,{type:"default",variant:"solid",color:"blue",icon:e.jsx(V,{}),onClick:()=>T(t==null?void 0:t._id),children:"Sửa"}),e.jsx(h,{type:"default",danger:!0,icon:e.jsx(H,{}),onClick:()=>x.confirm({title:"Xác nhận",content:`Bạn có chắc chắn muốn xóa vị trí ${t==null?void 0:t.name}?`,okText:"Đồng ý",cancelText:"Hủy",okType:"danger",onOk:()=>w(t==null?void 0:t._id)}),children:"Xóa"})]})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center  mt-5",children:[e.jsx(p,{className:"mt-4",children:e.jsx(p.Compact,{size:"middle",style:{width:"400px"},children:e.jsx(i,{addonBefore:e.jsx(B,{}),placeholder:"Tìm kiếm",value:c,onChange:s=>y(s.target.value)})})}),e.jsx(h,{type:"default",variant:"solid",color:"default",onClick:()=>d(!0),children:"Thêm vị trí"})]}),e.jsx(N,{columns:I,dataSource:f,className:"mt-10",scroll:{x:"max-content"}}),e.jsx(x,{title:"Thêm vị trí nhân viên",open:k,onOk:v,onCancel:b,okText:"Thêm",cancelText:"Hủy",okButtonProps:{style:{backgroundColor:"black",borderColor:"black"}},children:e.jsxs(l,{form:a,layout:"vertical",children:[e.jsx(l.Item,{name:"name",label:"Tên vị trí",children:e.jsx(i,{})}),e.jsx(l.Item,{name:"description",label:"Mô tả",children:e.jsx(i.TextArea,{})})]})}),e.jsx(x,{title:"Sửa vị trí nhân viên",open:m,onOk:g,onCancel:C,okText:"Cập nhật",cancelText:"Hủy",okButtonProps:{style:{backgroundColor:"black",borderColor:"black"}},children:e.jsxs(l,{form:a,layout:"vertical",children:[e.jsx(l.Item,{name:"name",label:"Tên vị trí",rules:[{required:!0,message:"Vị trí nhân viên là bắt buộc"}],children:e.jsx(i,{})}),e.jsx(l.Item,{name:"description",label:"Mô tả",children:e.jsx(i.TextArea,{})})]})})]})}export{K as default};
