import{r as s,b as w,c as y,j as a,a as o,d as v,y as m,s as j}from"./index-CVZjuLi7.js";import{L as N}from"./Loader-FL5xr_TU.js";function E({title:l,titleId:r,...c},i){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":r},c),l?s.createElement("title",{id:r},l):null,s.createElement("path",{d:"M3.53 2.47a.75.75 0 00-1.06 1.06l18 18a.75.75 0 101.06-1.06l-18-18zM22.676 12.553a11.249 11.249 0 01-2.631 4.31l-3.099-3.099a5.25 5.25 0 00-6.71-6.71L7.759 4.577a11.217 11.217 0 014.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113z"}),s.createElement("path",{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0115.75 12zM12.53 15.713l-4.243-4.244a3.75 3.75 0 004.243 4.243z"}),s.createElement("path",{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 00-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 016.75 12z"}))}const C=s.forwardRef(E);function k({title:l,titleId:r,...c},i){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":r},c),l?s.createElement("title",{id:r},l):null,s.createElement("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),s.createElement("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z",clipRule:"evenodd"}))}const z=s.forwardRef(k);function O(){const l=w(),r=y(),[c,i]=s.useState(""),[u,g]=s.useState(""),[d,f]=s.useState(!1),[p,h]=s.useState(!1),x=t=>{var n;const e=((n=t==null?void 0:t.data)==null?void 0:n.message)||(t==null?void 0:t.message)||"Lỗi máy chủ nội bộ";m.error(e,{autoClose:2e3,closeOnClick:!0,pauseOnHover:!1})},b=async()=>{var t;h(!0);try{const e=await v(c,u),n=(t=e==null?void 0:e.response)==null?void 0:t.data;if((n==null?void 0:n.success)===!1||(e==null?void 0:e.success)===!1){x(n||e);return}if((e==null?void 0:e.active)==="0")return m.warning("Bạn cần thay đổi mật khẩu của mình.",{autoClose:2e3,closeOnClick:!0,pauseOnHover:!1}),l("/auth/first-time-password-change",{state:{email:e.email}});if(e!=null&&e.success)return m.success(e.message,{autoClose:3e3,closeOnClick:!0,pauseOnHover:!1}),r(j({userId:e==null?void 0:e.userId,employeeId:e==null?void 0:e.employeeId,departmentId:e==null?void 0:e.departmentId,email:e.email,role:e.role,position:e.position})),l(e.role.toUpperCase()==="ADMIN"?"/dashboard/home":"/dashboard/employee")}catch(e){console.error(e,"Error"),m.error("Đăng nhập thất bại!",{autoClose:2e3,closeOnClick:!0,pauseOnHover:!1})}finally{h(!1)}};return a.jsx(a.Fragment,{children:p?a.jsx(N,{}):a.jsxs("section",{className:"m-8 flex gap-4",children:[a.jsxs("div",{className:"w-full lg:w-3/5 mt-24",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(o.Typography,{variant:"h2",className:"font-bold mb-4",children:"Đăng Nhập"}),a.jsx(o.Typography,{variant:"paragraph",color:"blue-gray",className:"text-lg font-normal",children:"Nhập email và mật khẩu của bạn để đăng nhập."})]}),a.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",children:[a.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[a.jsx(o.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Email của bạn"}),a.jsx(o.Input,{size:"lg",placeholder:"name@mail.com",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:t=>i(t.target.value)}),a.jsx(o.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Mật khẩu"}),a.jsxs("div",{className:"relative",children:[a.jsx(o.Input,{type:d?"text":"password",size:"lg",placeholder:"********",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:t=>g(t.target.value)}),a.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2",onClick:()=>f(!d),children:d?a.jsx(C,{className:"h-5 w-5 text-gray-500"}):a.jsx(z,{className:"h-5 w-5 text-gray-500"})})]})]}),a.jsx(o.Button,{className:"mt-6",fullWidth:!0,onClick:b,children:"Đăng Nhập"})]})]}),a.jsx("div",{className:"w-2/5 h-full hidden lg:block",children:a.jsx("img",{src:"/img/pattern.png",className:"h-full w-full object-cover rounded-3xl",alt:"Section"})})]})})}export{O as SignIn,O as default};
